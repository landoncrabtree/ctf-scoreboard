doctype html
head
	meta(charset='UTF-8')
	meta(name='viewport' content='width=device-width, initial-scale=1.0')
	title= title
	link(href='https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css' rel='stylesheet')
	style.
		body {
			padding-top: 60px;
		}
// Navigation Bar
nav.navbar.navbar-expand-md.navbar-dark.bg-dark.fixed-top
	a.navbar-brand(href='/') Scoreboard
		button.navbar-toggler(type='button' data-toggle='collapse' data-target='#navbarCollapse' aria-controls='navbarCollapse' aria-expanded='false' aria-label='Toggle navigation')
			span.navbar-toggler-icon
	#navbarCollapse.collapse.navbar-collapse
		if user_id
			ul.navbar-nav.mr-auto
				li.nav-item
					a.nav-link(href='submit') Submit Flag
				li.nav-item
					a.nav-link(href='logout') Logout
		else
			ul.navbar-nav.mr-auto
				li.nav-item
					a.nav-link(href='login') Login
				li.nav-item
					a.nav-link(href='register') Register
// Scoreboard Table
.container.mt-5
	if error
		.alert.alert-danger #{error}
	if success
		.alert.alert-success #{success}	
	table.table
		thead
			tr
				th Position
				th Name
				th Score
				th Flags Submitted
		tbody
			each user, index in users
				tr
					td #{index + 1}
					td #{user.name}
					td #{user.score}
					- var availableFlags = 10
					- var submittedFlags = user.num_flags
					td
						each flag in Array(availableFlags)
							if submittedFlags > 0
								span &#x2705; 
								- submittedFlags--
							else
								span &#x274C; 
script(src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js')
script(src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js')
script(src='https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.min.js')
script.
	var competition_ends = new Date('2024-05-01T00:00:00Z');
	var now = new Date();
	var time_left = competition_ends - now;
	var days = Math.floor(time_left / (1000 * 60 * 60 * 24));
	var hours = Math.floor((time_left % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
	var minutes = Math.floor((time_left % (1000 * 60 * 60)) / (1000 * 60));
	var seconds = Math.floor((time_left % (1000 * 60)) / 1000);
	var countdown = document.createElement('div');
	countdown.innerHTML = '<center>Competition ends in ' + days + ' days, ' + hours + ' hours, ' + minutes + ' minutes, and ' + seconds + ' seconds.</center>';
	document.body.appendChild(countdown);
	// Add a copyright notice
	var notice = document.createElement('div');
	notice.innerHTML = '<center>&copy; 2024 <a href="https://git.landon.pw">Landon Crabtree</a></center>';
	document.body.appendChild(notice);

	// Update the countdown every 1 second
	setInterval(function() {
		var now = new Date();
		var time_left = competition_ends - now;
		var days = Math.floor(time_left / (1000 * 60 * 60 * 24));
		var hours = Math.floor((time_left % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
		var minutes = Math.floor((time_left % (1000 * 60 * 60)) / (1000 * 60));
		var seconds = Math.floor((time_left % (1000 * 60)) / 1000);
		countdown.innerHTML = '<center>Competition ends in ' + days + ' days, ' + hours + ' hours, ' + minutes + ' minutes, and ' + seconds + ' seconds.</center>';
	}, 1000);

	// Refresh the page every minute (hack to update the scoreboard)
	setInterval(function() {
		location.reload();
	}, 60000);




