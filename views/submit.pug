- var page_title = 'Submit Flag'
include components/header
include components/navbar

// Submit Flag Form
.container.mt-5
	if error
		.alert.alert-danger #{error}
	if success
		.alert.alert-success #{success}	
	form(action='/submit' method='POST' enctype='multipart/form-data')
		.form-group
			label(for='flag') Flag
			input#flag.form-control(type='text' name='flag')
			button.btn.btn-primary(type='submit') Submit Flag
		.form-group
			label(for='writeup') Writeup
			input#writeup.form-control(type='file' name='writeup')
			button.btn.btn-primary(type='submit') Submit Writeup
		.form-group
			label(for='report') Report
			input#report.form-control(type='file' name='report')
			button.btn.btn-primary(type='submit') Submit Report
	
script(src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js')
script(src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js')
script(src='https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.min.js')
script.
	var competition_ends = new Date("#{competition_end_date}");
	var now = new Date();
	var time_left = competition_ends - now;
	var days = Math.floor(time_left / (1000 * 60 * 60 * 24));
	var hours = Math.floor((time_left % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
	var minutes = Math.floor((time_left % (1000 * 60 * 60)) / (1000 * 60));
	var seconds = Math.floor((time_left % (1000 * 60)) / 1000);
	var countdown = document.createElement('div');
	countdown.innerHTML = '<center>Competition ends in ' + days + ' days, ' + hours + ' hours, ' + minutes + ' minutes, and ' + seconds + ' seconds.</center>';
	document.body.appendChild(countdown);

	// Update the countdown every 1 second
	setInterval(function() {
		var now = new Date();
		var time_left = competition_ends - now;
		var days = Math.floor(time_left / (1000 * 60 * 60 * 24));
		var hours = Math.floor((time_left % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
		var minutes = Math.floor((time_left % (1000 * 60 * 60)) / (1000 * 60));
		var seconds = Math.floor((time_left % (1000 * 60)) / 1000);
		countdown.innerHTML = '<center>Competition ends in ' + days + ' days, ' + hours + ' hours, ' + minutes + ' minutes, and ' + seconds + ' seconds.</center>';
	}, 1000);




